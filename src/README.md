## Отчет по лабораторной работе № 2

#### № группы: `ПМ-2401`

#### Выполнила: `Колядинцева Ксения Дмитриевна`

#### Вариант: `15`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Входные и выходные данные](#2-входные-и-выходные-данные)
- [Математическая модель](#3-математическая-модель)
- [Выбор структуры данных](#4-выбор-структуры-данных)
- [Алгоритм](#5-алгоритм)
- [Программа](#6-программа)
- [Анализ правильности решения](#7-анализ-правильности-решения)

### 1. Постановка задачи

> Напишите программу на Java, которая выполняет следующие действия
с двумерным массивом температур:
>1. Считывает с консоли размеры массива N и M, затем элементы
   массива размером N × M, где каждый элемент представляет температуру в точке с координатами (x, y).
>2. Переставляет строки массива в порядке возрастания средней температуры в строке. Если средние температуры равны, сравнивает
   максимальные температуры строк (если равны, сохраняет исходный порядок).
>3. Находит и выводит максимальную температуру и координаты точки, в которой она зафиксирована.
>4. Выводит элементы массива в виде тепловой карты, заменяя температуры на символы, соответствующие их диапазону (например, ‘*’
   для низких температур, ‘’ для высоких).
>5. Вычисляет и выводит разницу между максимальной и минимальной температурами в массиве


### 2. Входные и выходные данные

#### Данные на вход

На вход программа должна получать 2 натуральных числа - N и M (натуральные, т.к. это размеры массива), а также N×M×3 вещественных чисел. 
Вещественные числа (температуры и координаты точек) будем хранить в массиве Arr, имеющем N строк, M столбцов и 3 элемента в каждой ячейке (температура, координата x и координата y). Минимальное и максимальное значения указаны для каждого элемента массива.

|                                     | Тип                       | min значение       | max значение       |
|-------------------------------------|---------------------------|--------------------|--------------------|
| N (Количество строк массива)        | Целое положительное число | 1                  | 10<sup>9</sup>     |
| M (Количество столбцов массива)     | Целое положительное число | 1                  | 10<sup>9</sup>     |
| Arr (Массив температур и координат) | Массив вещественных чисел | -1.79<sup>308<sup> | 1.79<sup>308<sup> |

#### Данные на выход

Программа выводит максимальное значение температуры и координаты точки, в которой она достигается, а также разницу между минимальной и максимальной температурой. Т.о. на выход мы получаем 4 числа типа double. Также выводится N×M символов типа char (* и !). 

|                    | Тип                | min значение       | max значение      |
|--------------------|--------------------|--------------------|-------------------|
| Макс. температура  | Вещественное число | -1.79<sup>308<sup> | 1.79<sup>308<sup> |
| Координата 1       | Вещественное число | -1.79<sup>308<sup> | 1.79<sup>308<sup> |
| Координата 2       | Вещественное число | -1.79<sup>308<sup> | 1.79<sup>308<sup> |
| Разница температур | Вещественное число | -1.79<sup>308<sup> | 1.79<sup>308<sup> |

### 3. Математическая модель
Подсчет средней температуры: сумма всех температур в строке / количество элементов в строке.
Разница температур: максимальная температура - минимальная температура.

### 4. Выбор структуры данных

Программа получает 2 целых положительных числа, не превышающих 10<sup>9</sup>. Для их хранения
можно выделить 2 переменные - `n` и `m` типа `int`. Для хранения значений температур и координат точек, в которых они зафиксированы, выделим трехмерный массив `arr` типа `double`, поскольку значения температуры и координаты точек - вещественные числа.
Также создадим два массива для хранения результатов промежуточных вычислений: `ave` типа `double` для средних значений температуры в строках и `max` типа `double` для максимальных значений температуры в строках и их координат.

|                                      | название переменной | Тип (в Java) | 
|--------------------------------------|---------------------|--------------|
| N (Количество строк массива)         | `n`                 | `int`        |
| M (Количество столбцов массива)      | `m`                 | `int`        | 
| Arr (Массив температур)              | `arr`               | `double`     |
| Ave (Массив средних температур)      | `ave`               | `double`     |
| Max (Массив максимальных температур) | `max`               | `double`     |


Результаты выполнения программы будем хранить в переменных `maxt`, `maxx`, `maxy` и `min` типа `double`.

|                                     | название переменной | Тип (в Java) | 
|-------------------------------------|---------------------|--------------|
| Maxt (Максимальная температура)     | `maxt`              | `double`     |
| Maxx (Координата x точки максимума) | `maxx`              | `double`     |
| Maxy (Координата y точки максимума) | `maxy`              | `double`     |
| Min (Минимальная температура)       | `min`               | `double`     |


### 5. Алгоритм

#### Алгоритм выполнения программы:

1. **Ввод данных:**  
   Программа считывает два целых чисел и записывает их в переменные `n` и `m` соответственно.
   После этого программа считывает еще N×M×3 вещественных чисел и записывает их в массив `arr`.

2. **Создание дополнительных переменных:**  
   Программа создает массивы `ave` и `max` для хранения средних и максимальных температур соответственно.

3. **Подготовительный этап:**
   Программа проходится по строкам массива и считает среднее значение температуры в каждой из них, записывая его в массив `ave`.
   После этого программа снова проходится по строкам массива и записывает значение максимальной температуры и координаты точки, в которой она достигается, в массив `max`.
4. **Перестановка строк в порядке возрастания средней температуры:**  
   Программа сравнивает значения средней температуры из массива `ave` для соседних строк:
   - Если значение у строки с меньшим номером больше, чем у строки с большим номером **или** значения равны, но максимальное значение строки с меньшим номером больше, чем строки с большим номером, то эти строки меняются местами. Также меняются местами соответствующие им элементы массивов `ave` и `max`.
5. **Поиск и вывод максимальной температуры:**
   Программа создает дополнительные переменные `maxt`, `maxx`, `maxy` для хранения максимума и его координат и записывает в них значения первого элемента массива `max`. После этого программа проходится по массиву `max` и сравнивает значения температур со значением `maxt`. Если находится большее значение, то оно записывается в переменную `maxt`, а его координаты - в переменные `maxx` и `maxy`. 
   После этого программа выводит значения переменных `maxt`, `maxx`, `maxy`.
6. **Поиск минимальной температуры и вывод разницы между ней и максимальной температурой:**
   Программа создает дополнительную переменную `min` и записывает в нее значение температуры первого элемента массива `arr`. После этого программа проходится по всем элементам массива `arr` и сравнивает их с текущим значением `min`. Если находится значение меньшее `min`, то оно присваивается переменной `min`.
   Затем программа выводит разницу между значениями переменных `maxt` и `min`.
7. **Вывод тепловой карты:**
   Программа проходится по массиву `arr` и сравнивает значения температур с нулем. Для отрицательных выводится `*`, для неотрицательных - `!`.


### 6. Программа

```java
import java.io.PrintStream;
import java.util.Scanner;
public class Main {
   public static Scanner in = new Scanner(System.in);
   public static PrintStream out = System.out;

   public static void main(String[] args) {
      int n = in.nextInt(); //количество строк
      int m = in.nextInt(); //количество столбцов
      double [][][] arr = new double[n][m][3]; //в каждой ячейке массива n*m хранится сначала температура, потом координаты (x, y)
      double [] ave = new double[n]; // массив средних температур
      double [][] max = new double[n][3]; //массив максимальных температур в строках и их координат

      //ввод массива с клавиатуры
      for (int i = 0; i < arr.length; i++)
         for (int j = 0; j < arr[i].length; j++)
            for (int k = 0; k < 3; k++)
               arr[i][j][k] = in.nextDouble();

      //подсчет средней температуры в строках
      for (int i = 0; i < arr.length; i++) {
         double sum = 0;
         for (int j = 0; j < arr[i].length; j++) {
            sum += arr[i][j][0];
         }
         ave[i] = sum / arr[i].length;
      }

      //нахождение максимума в каждой строке
      for (int i = 0; i < arr.length; i++) {
         for (int k = 0; k < 3; k++)
            max[i][k] = arr[i][0][k];
         for (int j = 1; j < arr[i].length; j++) {
            if (max[i][0] < arr[i][j][0]){
               for (int k = 0; k < 3; k++)
                  max[i][k] = arr[i][j][k];
            }
         }
      }

      //перестановка строк в порядке возрастания средней температуры
      for (int i = 0; i < arr.length - 1; i++)
         for (int j = 0; j < arr[i].length - i - 1; j++) {
            if (ave[j] > ave[j + 1] || (ave[j] == ave[j + 1] && max[j][0] > max[j + 1][0])) {
               double[][] swap = arr[j];
               arr[j] = arr[j + 1];
               arr[j + 1] = swap;
               double temp = ave[j];
               ave[j] = ave[j + 1];
               ave[j + 1] = temp;
               double [] tempmax = max[j];
               max[j] = max[j + 1];
               max[j + 1] = tempmax;
            }
         }

      //поиск и вывод максимальной температуры
      double maxt = max[0][0];
      double maxx = max[0][1];
      double maxy = max[0][2];

      for (int i = 1; i < max.length; i++) {
         if (max[i][0] > maxt){
            maxt = max[i][0];
            maxx = max[i][1];
            maxy = max[i][2];
         }
      }

      out.print("Максимальная температура: " + maxt);
      out.print("\nКоординаты точки, в которой она зафиксирована: (" + maxx + ", " + maxy + ")");

      //поиск минимальной температуры и вывод разницы между ней и максимальной температурой

      double min = arr[0][0][0];
      for (int i = 0; i < arr.length; i++)
         for (int j = 0; j < arr[i].length; j++){
            if (arr[i][j][0] < min)
               min = arr[i][j][0];
         }

      out.print("\nРазница между максимальной и минимальной температурами: " + (maxt - min));

      //вывод тепловой карты

      out.println();
      out.println("Тепловая карта (отрицательные температуры обозначены *, неотрицательные - !): ");
      for (int i = 0; i < arr.length; i++) {
         for (int j = 0; j < arr[i].length; j++) {
            if (arr[i][j][0] < 0)
               out.print(" * ");
            else
               out.print(" ! ");
         }
         out.println();
      }

   }
}
```

### 7. Анализ правильности решения

Программа работает корректно на всем множестве решений с учетом ограничений.

1. Тест на строки с одинаковым средним значением и разными максимумами:

    - **Input**:
        ```
        3 2
      25 1 2 -15 3 4
      -5 5 6 15 7 8
      2 9 10 5 11 12
        ```

    - **Output**:
        ```
        Максимальная температура: 25.0
      Координаты точки, в которой она зафиксирована: (1.0, 2.0)
      Разница между максимальной и минимальной температурами: 40.0
      Тепловая карта (отрицательные температуры обозначены *, неотрицательные - !):
      !  !
      *  !
      !  *
      ```

2. Тест на строки с одинаковым средним значением и одинаковыми максимумами:

    - **Input**:
        ```
        3 2
       25 1 2 -15 3 4
      -15 5 6 25 7 8
      2 9 10 5 11 12
        ```

    - **Output**:
        ```
        Максимальная температура: 25.0
       Координаты точки, в которой она зафиксирована: (1.0, 2.0)
      Разница между максимальной и минимальной температурами: 40.0
      Тепловая карта (отрицательные температуры обозначены *, неотрицательные - !):
      !  !
      !  *
      *  !
      ```
